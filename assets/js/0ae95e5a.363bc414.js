"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[620],{8453(e,n,r){r.d(n,{R:()=>i,x:()=>d});var a=r(6540);const l={},s=a.createContext(l);function i(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),a.createElement(s.Provider,{value:n},e.children)}},8992(e,n,r){r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>m,frontMatter:()=>i,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"dataframe","title":"DataFrame \u4f7f\u7528\u6307\u5357","description":"DataFrame \u662f DataGo \u7684\u6838\u5fc3\u6570\u636e\u7ed3\u6784\uff0c\u8868\u793a\u4e8c\u7ef4\u8868\u683c\u6570\u636e\uff0c\u7c7b\u4f3c\u4e8e\u7535\u5b50\u8868\u683c\u6216 SQL \u8868\u3002","source":"@site/docs/dataframe.md","sourceDirName":".","slug":"/dataframe","permalink":"/docs/dataframe","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"DataFrame \u4f7f\u7528\u6307\u5357"},"sidebar":"tutorialSidebar","previous":{"title":"\u5b89\u88c5\u4e0e\u5feb\u901f\u4f7f\u7528","permalink":"/docs/getting-started"},"next":{"title":"Series \u4f7f\u7528\u6307\u5357","permalink":"/docs/series"}}');var l=r(4848),s=r(8453);const i={sidebar_position:3,title:"DataFrame \u4f7f\u7528\u6307\u5357"},d="DataFrame \u4f7f\u7528\u6307\u5357",t={},c=[{value:"\u521b\u5efa DataFrame",id:"\u521b\u5efa-dataframe",level:2},{value:"\u4ece Map \u521b\u5efa",id:"\u4ece-map-\u521b\u5efa",level:3},{value:"\u4ece\u4e8c\u7ef4\u8bb0\u5f55\u521b\u5efa",id:"\u4ece\u4e8c\u7ef4\u8bb0\u5f55\u521b\u5efa",level:3},{value:"\u57fa\u672c\u4fe1\u606f",id:"\u57fa\u672c\u4fe1\u606f",level:2},{value:"\u6570\u636e\u9009\u62e9",id:"\u6570\u636e\u9009\u62e9",level:2},{value:"\u9009\u62e9\u884c",id:"\u9009\u62e9\u884c",level:3},{value:"\u9009\u62e9\u5217",id:"\u9009\u62e9\u5217",level:3},{value:"\u5207\u7247\u64cd\u4f5c",id:"\u5207\u7247\u64cd\u4f5c",level:3},{value:"\u6570\u636e\u64cd\u4f5c",id:"\u6570\u636e\u64cd\u4f5c",level:2},{value:"\u6dfb\u52a0/\u4fee\u6539\u5217",id:"\u6dfb\u52a0\u4fee\u6539\u5217",level:3},{value:"\u5220\u9664\u5217",id:"\u5220\u9664\u5217",level:3},{value:"\u91cd\u547d\u540d\u5217",id:"\u91cd\u547d\u540d\u5217",level:3},{value:"\u6570\u636e\u8fc7\u6ee4",id:"\u6570\u636e\u8fc7\u6ee4",level:3},{value:"\u6392\u5e8f",id:"\u6392\u5e8f",level:3},{value:"\u7edf\u8ba1\u5206\u6790",id:"\u7edf\u8ba1\u5206\u6790",level:2},{value:"Describe - \u7edf\u8ba1\u6458\u8981",id:"describe---\u7edf\u8ba1\u6458\u8981",level:3},{value:"\u5e76\u884c\u805a\u5408",id:"\u5e76\u884c\u805a\u5408",level:3},{value:"\u590d\u5236\u4e0e\u8f6c\u6362",id:"\u590d\u5236\u4e0e\u8f6c\u6362",level:2},{value:"\u5b8c\u6574\u793a\u4f8b",id:"\u5b8c\u6574\u793a\u4f8b",level:2},{value:"\u76f8\u5173\u7ae0\u8282",id:"\u76f8\u5173\u7ae0\u8282",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"dataframe-\u4f7f\u7528\u6307\u5357",children:"DataFrame \u4f7f\u7528\u6307\u5357"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"DataFrame"})," \u662f DataGo \u7684\u6838\u5fc3\u6570\u636e\u7ed3\u6784\uff0c\u8868\u793a\u4e8c\u7ef4\u8868\u683c\u6570\u636e\uff0c\u7c7b\u4f3c\u4e8e\u7535\u5b50\u8868\u683c\u6216 SQL \u8868\u3002"]}),"\n",(0,l.jsx)(n.h2,{id:"\u521b\u5efa-dataframe",children:"\u521b\u5efa DataFrame"}),"\n",(0,l.jsx)(n.h3,{id:"\u4ece-map-\u521b\u5efa",children:"\u4ece Map \u521b\u5efa"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'import "github.com/datago/dataframe"\r\n\r\ndf, err := dataframe.New(map[string][]interface{}{\r\n    "name":   {"Alice", "Bob", "Charlie"},\r\n    "age":    {25, 30, 35},\r\n    "salary": {50000.0, 60000.0, 70000.0},\r\n})\r\nif err != nil {\r\n    // \u5904\u7406\u9519\u8bef\uff08\u5982\u5217\u957f\u5ea6\u4e0d\u4e00\u81f4\uff09\r\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u4ece\u4e8c\u7ef4\u8bb0\u5f55\u521b\u5efa",children:"\u4ece\u4e8c\u7ef4\u8bb0\u5f55\u521b\u5efa"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'records := [][]interface{}{\r\n    {"Alice", 25, 50000.0},\r\n    {"Bob", 30, 60000.0},\r\n    {"Charlie", 35, 70000.0},\r\n}\r\ncolumns := []string{"name", "age", "salary"}\r\n\r\ndf, err := dataframe.FromRecords(records, columns)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u57fa\u672c\u4fe1\u606f",children:"\u57fa\u672c\u4fe1\u606f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// \u83b7\u53d6\u5f62\u72b6 [\u884c\u6570, \u5217\u6570]\r\nshape := df.Shape() // [3, 3]\r\n\r\n// \u83b7\u53d6\u5217\u540d\r\ncols := df.Columns() // ["name", "age", "salary"]\r\n\r\n// \u83b7\u53d6\u7d22\u5f15\r\nindex := df.Index()\r\n\r\n// \u6253\u5370 DataFrame\r\nfmt.Println(df)\r\n// DataFrame: rows=3, cols=3\r\n// index  name     age  salary\r\n// 0      Alice    25   50000\r\n// 1      Bob      30   60000\r\n// 2      Charlie  35   70000\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u6570\u636e\u9009\u62e9",children:"\u6570\u636e\u9009\u62e9"}),"\n",(0,l.jsx)(n.h3,{id:"\u9009\u62e9\u884c",children:"\u9009\u62e9\u884c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// \u524d n \u884c\r\nfirst5 := df.Head(5)\r\n\r\n// \u540e n \u884c\r\nlast5 := df.Tail(5)\r\n\r\n// \u6309\u4f4d\u7f6e\u83b7\u53d6\u5355\u884c\r\nrow, err := df.Row(0)\r\nname := row.Get("name") // "Alice"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u9009\u62e9\u5217",children:"\u9009\u62e9\u5217"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// \u9009\u62e9\u6307\u5b9a\u5217\uff08\u8fd4\u56de\u65b0 DataFrame\uff09\r\nsubset := df.Select("name", "age")\r\n\r\n// \u83b7\u53d6\u5355\u5217\uff08\u8fd4\u56de Series\uff09\r\nseries, ok := df.GetSeries("age")\r\nif ok {\r\n    fmt.Println(series.Mean()) // 30\r\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u5207\u7247\u64cd\u4f5c",children:"\u5207\u7247\u64cd\u4f5c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// ILoc - \u6309\u4f4d\u7f6e\u5207\u7247 [rowStart:rowEnd, colStart:colEnd]\r\nsubset := df.ILoc(0, 2, 0, 2) // \u524d2\u884c\uff0c\u524d2\u5217\r\n\r\n// Loc - \u6309\u6807\u7b7e\u9009\u62e9\r\nsubset := df.Loc([]interface{}{0, 1}, []string{"name", "age"})\r\n\r\n// At - \u83b7\u53d6\u5355\u4e2a\u503c\r\nvalue, err := df.At(0, "name") // "Alice"\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u6570\u636e\u64cd\u4f5c",children:"\u6570\u636e\u64cd\u4f5c"}),"\n",(0,l.jsx)(n.h3,{id:"\u6dfb\u52a0\u4fee\u6539\u5217",children:"\u6dfb\u52a0/\u4fee\u6539\u5217"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// \u6dfb\u52a0\u65b0\u5217\r\nbonusSeries := dataframe.NewSeriesFromFloat64s(\r\n    []float64{5000, 6000, 7000}, \r\n    "bonus",\r\n)\r\nnewDF := df.AddColumn("bonus", bonusSeries)\r\n\r\n// \u8bbe\u7f6e/\u66ff\u6362\u5217\r\nerr := df.SetColumn("age", newAgeSeries)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u5220\u9664\u5217",children:"\u5220\u9664\u5217"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// \u5220\u9664\u5355\u5217\r\ndf2 := df.Drop("salary")\r\n\r\n// \u5220\u9664\u591a\u5217\r\ndf2 := df.Drop("salary", "bonus")\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u91cd\u547d\u540d\u5217",children:"\u91cd\u547d\u540d\u5217"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'df2 := df.Rename(map[string]string{\r\n    "name":   "employee_name",\r\n    "salary": "annual_salary",\r\n})\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u6570\u636e\u8fc7\u6ee4",children:"\u6570\u636e\u8fc7\u6ee4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// \u4f7f\u7528 Filter \u65b9\u6cd5\r\nfiltered := df.Filter(func(row dataframe.Row) bool {\r\n    age := row.Get("age")\r\n    if v, ok := age.(int); ok {\r\n        return v >= 30\r\n    }\r\n    return false\r\n})\r\n\r\n// \u5e76\u884c\u8fc7\u6ee4\uff08\u5927\u6570\u636e\u91cf\u63a8\u8350\uff09\r\nfiltered := df.ParallelFilter(func(row dataframe.Row) bool {\r\n    return row.Get("age").(int) >= 30\r\n})\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u6392\u5e8f",children:"\u6392\u5e8f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// \u5347\u5e8f\u6392\u5e8f\r\nsorted := df.SortBy("age", dataframe.Ascending)\r\n\r\n// \u964d\u5e8f\u6392\u5e8f\r\nsorted := df.SortBy("salary", dataframe.Descending)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u7edf\u8ba1\u5206\u6790",children:"\u7edf\u8ba1\u5206\u6790"}),"\n",(0,l.jsx)(n.h3,{id:"describe---\u7edf\u8ba1\u6458\u8981",children:"Describe - \u7edf\u8ba1\u6458\u8981"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"stats := df.Describe()\r\nfmt.Println(stats)\r\n// \u8f93\u51fa\u6bcf\u5217\u7684 count, mean, std, min, max\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u5e76\u884c\u805a\u5408",children:"\u5e76\u884c\u805a\u5408"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// \u5e76\u884c\u8ba1\u7b97\u6240\u6709\u5217\u7684\u548c\r\nsums := df.ParallelSum()\r\nfmt.Println(sums["salary"]) // 180000\r\n\r\n// \u5e76\u884c\u8ba1\u7b97\u5747\u503c\r\nmeans := df.ParallelMean()\r\n\r\n// \u5e76\u884c\u8ba1\u7b97\u6700\u5c0f/\u6700\u5927\u503c\r\nmins := df.ParallelMin()\r\nmaxs := df.ParallelMax()\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u590d\u5236\u4e0e\u8f6c\u6362",children:"\u590d\u5236\u4e0e\u8f6c\u6362"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"// \u6d45\u62f7\u8d1d\r\ndfCopy := df.Copy()\r\n\r\n// \u5e76\u884c\u8f6c\u6362\u6240\u6709\u5217\r\ntransformed := df.ParallelTransform(func(s *dataframe.Series) *dataframe.Series {\r\n    return s.Mul(2) // \u6240\u6709\u6570\u503c\u4e58\u4ee5 2\r\n})\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u5b8c\u6574\u793a\u4f8b",children:"\u5b8c\u6574\u793a\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'package main\r\n\r\nimport (\r\n    "fmt"\r\n    "github.com/datago/dataframe"\r\n)\r\n\r\nfunc main() {\r\n    // \u521b\u5efa\u9500\u552e\u6570\u636e\r\n    df, _ := dataframe.New(map[string][]interface{}{\r\n        "product":  {"A", "B", "A", "B", "A"},\r\n        "region":   {"East", "East", "West", "West", "East"},\r\n        "sales":    {100.0, 150.0, 200.0, 120.0, 180.0},\r\n        "quantity": {10, 15, 20, 12, 18},\r\n    })\r\n    fmt.Println("\u539f\u59cb\u6570\u636e:")\r\n    fmt.Println(df)\r\n\r\n    // \u7b5b\u9009 East \u5730\u533a\r\n    eastSales := df.Filter(func(r dataframe.Row) bool {\r\n        return r.Get("region") == "East"\r\n    })\r\n    fmt.Println("\\nEast \u5730\u533a\u9500\u552e:")\r\n    fmt.Println(eastSales)\r\n\r\n    // \u6309\u9500\u552e\u989d\u964d\u5e8f\u6392\u5e8f\r\n    sorted := df.SortBy("sales", dataframe.Descending)\r\n    fmt.Println("\\n\u6309\u9500\u552e\u989d\u6392\u5e8f:")\r\n    fmt.Println(sorted)\r\n\r\n    // \u7edf\u8ba1\u6458\u8981\r\n    fmt.Println("\\n\u7edf\u8ba1\u6458\u8981:")\r\n    fmt.Println(df.Describe())\r\n\r\n    // \u9009\u62e9\u7279\u5b9a\u5217\r\n    subset := df.Select("product", "sales")\r\n    fmt.Println("\\n\u4ea7\u54c1\u9500\u552e:")\r\n    fmt.Println(subset)\r\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u76f8\u5173\u7ae0\u8282",children:"\u76f8\u5173\u7ae0\u8282"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./series",children:"Series \u4f7f\u7528\u6307\u5357"})," - \u5355\u5217\u6570\u636e\u64cd\u4f5c"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./groupby",children:"GroupBy \u5206\u7ec4\u805a\u5408"})," - \u6570\u636e\u5206\u7ec4\u4e0e\u805a\u5408"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./merge",children:"Merge/Join \u6570\u636e\u5408\u5e76"})," - \u591a\u8868\u5173\u8054"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./parallel",children:"\u5e76\u884c\u5904\u7406"})," - \u5927\u6570\u636e\u91cf\u52a0\u901f"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);